# Design Tokens Package

This package manages design tokens using [Style Dictionary](https://styledictionary.com) to transform design tokens from Tokens Studio Figma plugin into platform-specific formats.

## üìñ Overview

Design tokens are defined in the Tokens Studio Figma plugin and exported to the `tokens/tokens.json` file, which follows the official [W3C Design Tokens Community Group (DTCG) format](https://www.w3.org/community/design-tokens/).

**Important**: The `tokens/tokens.json` file is the golden source for all design tokens and is automatically generated by Tokens Studio. Do not edit this file manually.

## üîÑ Workflow

1. **Design tokens are defined** in Tokens Studio Figma plugin
2. **Changes are exported** to the `tokens/tokens.json` file in a dedicated branch
3. **Changes are merged** into the main branch via Pull Request
4. **Style Dictionary transforms** the tokens into platform-specific formats

## üì¶ Installation

This package uses [pnpm](https://pnpm.io) as the package manager and requires the official Tokens Studio transforms:

```bash
pnpm install
```

### Dependencies

- [`style-dictionary`](https://styledictionary.com) - The core token transformation engine
- [`@tokens-studio/sd-transforms`](https://github.com/tokens-studio/sd-transforms) - Official Tokens Studio transforms and preprocessors

## üöÄ Usage

### Build all platforms

```bash
pnpm run build:tokens
```

### Clean build (removes existing build files first)

```bash
pnpm run build:tokens:clean
```

## üé® Output Formats

Style Dictionary transforms the design tokens into the following platform-specific formats:

### JavaScript/TypeScript

- `build/js/tokens.js` - ES6 module format
- `build/js/tokens.json` - Flat JSON format

### CSS

- `build/css/variables.css` - CSS custom properties (CSS variables)

### SCSS

- `build/scss/_variables.scss` - SCSS variables

### Android

- `build/android/colors.xml` - Android color resources
- `build/android/dimens.xml` - Android dimension resources
- `build/android/font_dimens.xml` - Android font dimension resources

### iOS (Objective-C)

- `build/ios/DesignTokens.h` - iOS header file
- `build/ios/DesignTokens.m` - iOS implementation file

### iOS (Swift)

- `build/ios-swift/DesignTokens.swift` - iOS Swift class

## ‚öôÔ∏è Configuration

The build process is configured through:

- `build-tokens.js` - Build script that uses the official `@tokens-studio/sd-transforms` package
- `package.json` - Contains build scripts and dependencies

### Tokens Studio Integration

The configuration uses the official [`@tokens-studio/sd-transforms`](https://github.com/tokens-studio/sd-transforms) package which provides:

- **Automatic token reference resolution**: Resolves relative references like `{baseUnit}` and `{common.white}`
- **Mathematical expression evaluation**: Calculates expressions like `1 * {baseUnit}` and `0.25rem * {scalingFactor}`
- **Single-file export support**: The `excludeParentKeys: true` option handles single-file exports from Tokens Studio Figma plugin
- **DTCG alignment**: Aligns Tokens Studio token types with W3C Design Tokens Community Group format

## üèóÔ∏è Token Structure

The tokens are organized into the following categories:

- **Scaling**: Scale factors for responsive design
- **Spacing**: Base units, spacing scales, and gaps
- **Typography**: Font families, weights, sizes, line heights, and letter spacing
- **Colors**: Color palette including backgrounds, text, semantic colors, and common colors

## ü§ù Contributing

When adding or updating tokens:

1. Make changes in Tokens Studio Figma plugin
2. Export changes to update `tokens/tokens.json`
3. Create a Pull Request with the changes
4. Once merged, run `pnpm run build:tokens` to generate updated platform files

## ‚ö†Ô∏è Known Limitations

### Tokens Studio Free Version

This project currently uses the **FREE version** of Tokens Studio, which has the following limitations:

#### Single-File Export Only

- **Current**: All tokens are exported into a single `tokens/tokens.json` file
- **Impact**: The `excludeParentKeys: true` configuration flattens token names
  - We get: `--base-unit: 0.25rem;` instead of `--spacing-base-unit: 0.25rem;`
  - We get: `--semantic-danger: #ff4034;` instead of `--colors-semantic-danger: #ff4034;`
- **PRO solution**: Multi-file export would preserve full token hierarchy and naming

#### No Multi-Theming Support

- **Current**: Cannot generate tokens for multiple themes (light/dark modes)
- **Impact**: Limited to a single design system variant
- **PRO solution**: Multi-dimensional theming with automatic theme file generation

### Upgrading to Tokens Studio PRO

With [Tokens Studio PRO](https://tokens.studio/pricing), we would gain:

1. **Multi-file token exports** ‚Üí Preserved token naming hierarchy
2. **Multi-dimensional theming** ‚Üí Light/dark mode support + theme combinations
3. **Advanced token management** ‚Üí Better organization and workflows

## üìù Notes

- Mathematical expressions in tokens (like `1 * {baseUnit}`) are automatically evaluated during the build process
- Token references (like `{common.white}`) are automatically resolved to their actual values
- Color tokens are properly resolved and converted to the appropriate format for each platform
- Font family references are resolved to their actual font stack values
- The `excludeParentKeys: true` configuration flattens the token structure for single-file Tokens Studio exports
- All transforms are provided by the official [`@tokens-studio/sd-transforms`](https://github.com/tokens-studio/sd-transforms) package
